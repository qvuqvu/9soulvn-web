{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\qvuqv\\\\OneDrive\\\\Documents\\\\UIT\\\\ecom2\\\\MERN-Ecommerce\\\\frontend\\\\src\\\\pages\\\\LoginPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Form, Button, InputGroup, Col, Card, FloatingLabel } from 'react-bootstrap';\nimport { loginUser } from '../actions/userActions';\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\nimport axios from 'axios';\nimport Loader from '../components/Loader';\nimport Message from '../components/Message';\nimport FormContainer from '../components/FormContainer';\nimport SocialLoginOptions from '../components/SocialLoginOptions';\nimport '../styles/login-register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LoginPage = _ref => {\n  _s();\n\n  let {\n    location,\n    history\n  } = _ref;\n  const [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\n\n  const [showRedirectMsg, setShowRedirectMsg] = useState(false);\n  const [forgotPassword, setForgotPassword] = useState(false);\n  const [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\n\n  const [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\n\n  const [type, setType] = useState('password');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n  const redirect = location.search ? location.search.split('=')[1] : '';\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    loading,\n    userInfo,\n    error\n  } = userLogin;\n  const storedInfo = JSON.parse(localStorage.getItem('userInfo'));\n  useEffect(() => {\n    if (!location.search.includes('success') && userInfo) history.push(redirect);\n  }, [history, redirect, location, userInfo]);\n  useEffect(() => {\n    if (location.search.includes('login=failed')) {\n      const errorCodeQuery = location.search.split('&')[1];\n      const errorCode = errorCodeQuery.split('=')[1];\n\n      switch (errorCode) {\n        case '0':\n          setAuthFailedMsg('It looks like you had registered using a Google Account');\n          break;\n\n        case '1':\n          setAuthFailedMsg('It looks like you had registered using a Github Account');\n          break;\n\n        case '2':\n          setAuthFailedMsg('It looks like you had registered using a Twitter Account');\n          break;\n\n        case '3':\n          setAuthFailedMsg('It looks like you had registered using a LinkedIn Account');\n          break;\n\n        default:\n          return;\n      }\n    }\n  }, [location.search]); // if redirected to login page after refresh token expired, show a message\n\n  useEffect(() => {\n    const flag = localStorage.getItem('redirectLogin');\n\n    if (flag && flag === 'true') {\n      setShowRedirectMsg(true);\n    } else {\n      setShowRedirectMsg(false);\n    }\n  }, []); // if the passport social login is successful, get the user's data and store in redux store\n\n  useEffect(() => {\n    // check for url params\n    if (window.location.search.includes('success')) {\n      const queries = window.location.search.split('&');\n      const isSuccess = queries[0].split('=')[1] === 'success';\n      const id = queries[1].split('=')[1]; // if successful login\n\n      if (isSuccess) {\n        // get user data and dispatch login success\n        axios.post('/api/users/passport/data', {\n          id\n        }).then(_ref2 => {\n          let {\n            data\n          } = _ref2;\n          const {\n            id,\n            email,\n            name,\n            isAdmin,\n            isConfirmed,\n            avatar\n          } = data;\n          const userData = {\n            id,\n            email,\n            name,\n            isAdmin,\n            isConfirmed,\n            avatar,\n            isSocialLogin: true\n          }; // login user in frontend\n\n          dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: userData\n          }); // update the local storage\n\n          localStorage.setItem('userInfo', JSON.stringify(userData)); // remove variable that was meant to promt email verification if it is a social login\n\n          localStorage.removeItem('promptEmailVerfication');\n          history.push('/shipping'); // move to shipping page by default\n        });\n      }\n    }\n  }, [dispatch, history, redirect]);\n  useEffect(() => {\n    // if redirected from confirmation page, fill email and let user fill the password field\n    if (storedInfo && storedInfo.email && localStorage.getItem('fillEmailOnLoginPage') === 'true') {\n      localStorage.removeItem('fillEmailOnLoginPage');\n      setEmail(storedInfo.email);\n    }\n  }, [storedInfo]); // to show/hide the password field content\n\n  const showHide = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setType(type === 'password' ? 'text' : 'password');\n  }; // login user from email and password\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch(loginUser(email, password));\n  }; // to send a mail for resetting password if forgotted\n\n\n  const handleEmailSubmit = async e => {\n    e.preventDefault();\n    setShowLoading(true); // send the mail to the registered user\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post('/api/users/reset', {\n      email\n    }, config);\n\n    if (data) {\n      setShowLoading(false);\n      setEmailSent(true); // store the name in localstorage\n\n      localStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\n    }\n  }; // there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\n\n\n  if (!forgotPassword) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        children: [authFailedMsg && /*#__PURE__*/_jsxDEV(Message, {\n          variant: \"danger\",\n          dismissible: true,\n          children: authFailedMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inner-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-heading\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                background: 'ghostwhite',\n                boxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n                WebkitBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\n                MozBoxShadow: '0px 0px 9px 0px rgba(0, 0, 0, 0.2)'\n              },\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              onClick: () => history.push('/register'),\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 7\n          }, this), error && /*#__PURE__*/_jsxDEV(Message, {\n            dismissible: true,\n            variant: \"danger\",\n            duration: 10,\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 8\n          }, this), showRedirectMsg && /*#__PURE__*/_jsxDEV(Message, {\n            dismissible: true,\n            variant: \"info\",\n            duration: 10,\n            children: \"Your session has expired. Please login again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 8\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"email\",\n                children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                  controlId: \"emailinput\",\n                  label: \"Email address\",\n                  className: \"mb-3\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    required: true,\n                    size: \"lg\",\n                    placeholder: \"Enter Email Address\",\n                    type: \"email\",\n                    value: email,\n                    onChange: e => setEmail(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                  children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                    controlId: \"passwordinput\",\n                    label: \"Password\",\n                    style: {\n                      display: 'flex',\n                      width: '100%'\n                    },\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                      required: true,\n                      size: \"lg\",\n                      type: type,\n                      placeholder: \"Enter your password\",\n                      value: password,\n                      style: {\n                        borderRight: 'none'\n                      },\n                      onChange: e => setPassword(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-group-append\",\n                      children: /*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                        onClick: showHide,\n                        style: {\n                          fontSize: '1rem',\n                          height: '100%',\n                          marginLeft: '-0.5em',\n                          background: 'transparent',\n                          borderLeft: 'none'\n                        },\n                        children: type === 'text' ? /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"far fa-eye-slash\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 16\n                        }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"far fa-eye\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 289,\n                          columnNumber: 16\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 14\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 13\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                style: {\n                  display: 'flex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  type: \"button\",\n                  variant: \"link\",\n                  style: {\n                    marginTop: '-1em',\n                    padding: '0'\n                  },\n                  onClick: () => setForgotPassword(true),\n                  children: \"Forgot Password?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  className: \"ms-auto\",\n                  style: {\n                    padding: '0.5em 1em',\n                    width: '8rem'\n                  },\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(SocialLoginOptions, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-inner-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-heading\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              style: {\n                background: 'ghostwhite',\n                boxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                WebkitBoxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                MozBoxShadow: '0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\n                cursor: 'default'\n              },\n              children: \"Reset Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 7\n          }, this), showLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 8\n          }, this) : emailSent ? /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              className: \"pl-0\",\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: \"Email Sent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: \"Please use the link sent to your email and reset your password right away!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: handleEmailSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              controlId: \"email\",\n              children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n                controlId: \"emailinput\",\n                label: \"Email address\",\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  size: \"lg\",\n                  placeholder: \"Enter Email Address\",\n                  type: \"email\",\n                  value: email,\n                  onChange: e => setEmail(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              style: {\n                display: 'flex'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                variant: \"link\",\n                className: \"remember-password\",\n                style: {\n                  marginTop: '-1em',\n                  padding: '0'\n                },\n                onClick: () => setForgotPassword(false),\n                children: \"I remember my password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                className: \"ms-auto\",\n                style: {\n                  padding: '0.5em 1em',\n                  width: '8rem'\n                },\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(SocialLoginOptions, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(LoginPage, \"8wQiw60iaC+qUzBVFA/uiCJodMk=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = LoginPage;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","Form","Button","InputGroup","Col","Card","FloatingLabel","loginUser","USER_LOGIN_SUCCESS","axios","Loader","Message","FormContainer","SocialLoginOptions","LoginPage","location","history","authFailedMsg","setAuthFailedMsg","showRedirectMsg","setShowRedirectMsg","forgotPassword","setForgotPassword","showLoading","setShowLoading","emailSent","setEmailSent","type","setType","email","setEmail","password","setPassword","dispatch","redirect","search","split","userLogin","state","loading","userInfo","error","storedInfo","JSON","parse","localStorage","getItem","includes","push","errorCodeQuery","errorCode","flag","window","queries","isSuccess","id","post","then","data","name","isAdmin","isConfirmed","avatar","userData","isSocialLogin","payload","setItem","stringify","removeItem","showHide","e","preventDefault","stopPropagation","handleSubmit","handleEmailSubmit","config","headers","background","boxShadow","WebkitBoxShadow","MozBoxShadow","target","value","display","width","borderRight","fontSize","height","marginLeft","borderLeft","marginTop","padding","cursor"],"sources":["C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tForm,\r\n\tButton,\r\n\tInputGroup,\r\n\tCol,\r\n\tCard,\r\n\tFloatingLabel,\r\n} from 'react-bootstrap';\r\nimport { loginUser } from '../actions/userActions';\r\nimport { USER_LOGIN_SUCCESS } from '../constants/userConstants';\r\nimport axios from 'axios';\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport FormContainer from '../components/FormContainer';\r\nimport SocialLoginOptions from '../components/SocialLoginOptions';\r\nimport '../styles/login-register.css';\r\n\r\nconst LoginPage = ({ location, history }) => {\r\n\tconst [authFailedMsg, setAuthFailedMsg] = useState(''); // if user tried to login with different social account after registering with some other social account\r\n\tconst [showRedirectMsg, setShowRedirectMsg] = useState(false);\r\n\tconst [forgotPassword, setForgotPassword] = useState(false);\r\n\tconst [showLoading, setShowLoading] = useState(false); // to display loader after user submits the email to reset password\r\n\tconst [emailSent, setEmailSent] = useState(false); //to display a message that email is sent to reset password\r\n\r\n\tconst [type, setType] = useState('password');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst dispatch = useDispatch();\r\n\tconst redirect = location.search ? location.search.split('=')[1] : '';\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { loading, userInfo, error } = userLogin;\r\n\tconst storedInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!location.search.includes('success') && userInfo)\r\n\t\t\thistory.push(redirect);\r\n\t}, [history, redirect, location, userInfo]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (location.search.includes('login=failed')) {\r\n\t\t\tconst errorCodeQuery = location.search.split('&')[1];\r\n\t\t\tconst errorCode = errorCodeQuery.split('=')[1];\r\n\t\t\tswitch (errorCode) {\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Google Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '1':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Github Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '2':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a Twitter Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '3':\r\n\t\t\t\t\tsetAuthFailedMsg(\r\n\t\t\t\t\t\t'It looks like you had registered using a LinkedIn Account'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [location.search]);\r\n\r\n\t// if redirected to login page after refresh token expired, show a message\r\n\tuseEffect(() => {\r\n\t\tconst flag = localStorage.getItem('redirectLogin');\r\n\t\tif (flag && flag === 'true') {\r\n\t\t\tsetShowRedirectMsg(true);\r\n\t\t} else {\r\n\t\t\tsetShowRedirectMsg(false);\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// if the passport social login is successful, get the user's data and store in redux store\r\n\tuseEffect(() => {\r\n\t\t// check for url params\r\n\t\tif (window.location.search.includes('success')) {\r\n\t\t\tconst queries = window.location.search.split('&');\r\n\t\t\tconst isSuccess = queries[0].split('=')[1] === 'success';\r\n\t\t\tconst id = queries[1].split('=')[1];\r\n\r\n\t\t\t// if successful login\r\n\t\t\tif (isSuccess) {\r\n\t\t\t\t// get user data and dispatch login success\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post('/api/users/passport/data', {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t} = data;\r\n\t\t\t\t\t\tconst userData = {\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\temail,\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tisAdmin,\r\n\t\t\t\t\t\t\tisConfirmed,\r\n\t\t\t\t\t\t\tavatar,\r\n\t\t\t\t\t\t\tisSocialLogin: true,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// login user in frontend\r\n\t\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\t\ttype: USER_LOGIN_SUCCESS,\r\n\t\t\t\t\t\t\tpayload: userData,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// update the local storage\r\n\t\t\t\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\t\t\t'userInfo',\r\n\t\t\t\t\t\t\tJSON.stringify(userData)\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// remove variable that was meant to promt email verification if it is a social login\r\n\t\t\t\t\t\tlocalStorage.removeItem('promptEmailVerfication');\r\n\t\t\t\t\t\thistory.push('/shipping'); // move to shipping page by default\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}, [dispatch, history, redirect]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// if redirected from confirmation page, fill email and let user fill the password field\r\n\t\tif (\r\n\t\t\tstoredInfo &&\r\n\t\t\tstoredInfo.email &&\r\n\t\t\tlocalStorage.getItem('fillEmailOnLoginPage') === 'true'\r\n\t\t) {\r\n\t\t\tlocalStorage.removeItem('fillEmailOnLoginPage');\r\n\t\t\tsetEmail(storedInfo.email);\r\n\t\t}\r\n\t}, [storedInfo]);\r\n\r\n\t// to show/hide the password field content\r\n\tconst showHide = (e) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tsetType(type === 'password' ? 'text' : 'password');\r\n\t};\r\n\r\n\t// login user from email and password\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(loginUser(email, password));\r\n\t};\r\n\r\n\t// to send a mail for resetting password if forgotted\r\n\tconst handleEmailSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetShowLoading(true);\r\n\r\n\t\t// send the mail to the registered user\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst { data } = await axios.post(\r\n\t\t\t'/api/users/reset',\r\n\t\t\t{ email },\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tif (data) {\r\n\t\t\tsetShowLoading(false);\r\n\t\t\tsetEmailSent(true);\r\n\t\t\t// store the name in localstorage\r\n\t\t\tlocalStorage.setItem('EcommerceUserName', data.name); // store the user name, so that we can use it in the profile page to ask them to confirm email\r\n\t\t}\r\n\t};\r\n\r\n\t// there are 2 sorts of forms to be shown, one when resetting password, and other when normal login\r\n\tif (!forgotPassword) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t{/* if passport login has failed because user logged in with differrent social account, shoe the error msg */}\r\n\t\t\t\t\t{authFailedMsg && (\r\n\t\t\t\t\t\t<Message variant='danger' dismissible>\r\n\t\t\t\t\t\t\t{authFailedMsg}\r\n\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px 0px 9px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t<h1 onClick={() => history.push('/register')}>\r\n\t\t\t\t\t\t\t\tSign Up\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{error && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='danger' duration={10}>\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{/* the message when refresh token has expired */}\r\n\t\t\t\t\t\t{showRedirectMsg && (\r\n\t\t\t\t\t\t\t<Message dismissible variant='info' duration={10}>\r\n\t\t\t\t\t\t\t\tYour session has expired. Please login again.\r\n\t\t\t\t\t\t\t</Message>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolId='passwordinput'\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel='Password'\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype={type}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRight: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPassword(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='input-group-append'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={showHide}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '1rem',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'-0.5em',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'transparent',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderLeft: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{type === 'text' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye-slash' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='far fa-eye' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(true)\r\n\t\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\t\tForgot Password?\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<FormContainer>\r\n\t\t\t\t\t<div className='form-inner-container'>\r\n\t\t\t\t\t\t<div className='form-heading'>\r\n\t\t\t\t\t\t\t<h1\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: 'ghostwhite',\r\n\t\t\t\t\t\t\t\t\tboxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tWebkitBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tMozBoxShadow:\r\n\t\t\t\t\t\t\t\t\t\t'0px -1px 5px 0px rgba(0, 0, 0, 0.2)',\r\n\t\t\t\t\t\t\t\t\tcursor: 'default',\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tReset Password\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{showLoading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : emailSent ? (\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<Card.Body className='pl-0'>\r\n\t\t\t\t\t\t\t\t\t<Card.Title>Email Sent</Card.Title>\r\n\t\t\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\t\t\tPlease use the link sent to your email\r\n\t\t\t\t\t\t\t\t\t\tand reset your password right away!\r\n\t\t\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Form onSubmit={handleEmailSubmit}>\r\n\t\t\t\t\t\t\t\t<Form.Group controlId='email'>\r\n\t\t\t\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\t\t\t\tcontrolId='emailinput'\r\n\t\t\t\t\t\t\t\t\t\tlabel='Email address'\r\n\t\t\t\t\t\t\t\t\t\tclassName='mb-3'>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tsize='lg'\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Email Address'\r\n\t\t\t\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmail(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t\t\t<Col\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='button'\r\n\t\t\t\t\t\t\t\t\t\tvariant='link'\r\n\t\t\t\t\t\t\t\t\t\tclassName='remember-password'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmarginTop: '-1em',\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetForgotPassword(false)\r\n\t\t\t\t\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t\t\t\tI remember my password\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\t\t\t\tclassName='ms-auto'\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: '0.5em 1em',\r\n\t\t\t\t\t\t\t\t\t\t\twidth: '8rem',\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<SocialLoginOptions />\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</FormContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}