{"ast":null,"code":"import _slicedToArray from\"C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{ToastContainer,Toast}from'react-bootstrap';import*as serviceWorkerRegistration from'./serviceWorkerRegistration';import'./styles/update-toast.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ServiceWorkerWrapper=function ServiceWorkerWrapper(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showReload=_useState2[0],setShowReload=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),waitingWorker=_useState4[0],setWaitingWorker=_useState4[1];var onSWUpdate=function onSWUpdate(registration){setShowReload(true);setWaitingWorker(registration.waiting);};// register the service worker on page load\nuseEffect(function(){serviceWorkerRegistration.register({onUpdate:onSWUpdate});},[]);// skip waiting and install new updates on page reload\nvar reloadPage=function reloadPage(){waitingWorker===null||waitingWorker===void 0?void 0:waitingWorker.postMessage({type:'SKIP_WAITING'});setShowReload(false);window.location.reload(true);};return/*#__PURE__*/_jsx(ToastContainer,{className:\"update-toast\",onClick:reloadPage,children:/*#__PURE__*/_jsxs(Toast,{show:showReload,onClose:reloadPage,bg:\"dark\",children:[/*#__PURE__*/_jsx(Toast.Header,{children:/*#__PURE__*/_jsx(\"strong\",{className:\"me-auto text-black\",children:\"New Version Available\"})}),/*#__PURE__*/_jsx(Toast.Body,{className:\"text-white\",children:\"Reload to see whats new!\"})]})});};export default ServiceWorkerWrapper;","map":{"version":3,"names":["React","useState","useEffect","ToastContainer","Toast","serviceWorkerRegistration","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","registration","waiting","register","onUpdate","reloadPage","postMessage","type","window","location","reload"],"sources":["C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/src/ServiceWorkerWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ToastContainer, Toast } from 'react-bootstrap';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport './styles/update-toast.css';\r\n\r\nconst ServiceWorkerWrapper = () => {\r\n\tconst [showReload, setShowReload] = useState(false);\r\n\tconst [waitingWorker, setWaitingWorker] = useState(null);\r\n\r\n\tconst onSWUpdate = (registration) => {\r\n\t\tsetShowReload(true);\r\n\t\tsetWaitingWorker(registration.waiting);\r\n\t};\r\n\r\n\t// register the service worker on page load\r\n\tuseEffect(() => {\r\n\t\tserviceWorkerRegistration.register({ onUpdate: onSWUpdate });\r\n\t}, []);\r\n\r\n\t// skip waiting and install new updates on page reload\r\n\tconst reloadPage = () => {\r\n\t\twaitingWorker?.postMessage({ type: 'SKIP_WAITING' });\r\n\t\tsetShowReload(false);\r\n\t\twindow.location.reload(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ToastContainer className='update-toast' onClick={reloadPage}>\r\n\t\t\t<Toast show={showReload} onClose={reloadPage} bg='dark'>\r\n\t\t\t\t<Toast.Header>\r\n\t\t\t\t\t<strong className='me-auto text-black'>\r\n\t\t\t\t\t\tNew Version Available\r\n\t\t\t\t\t</strong>\r\n\t\t\t\t</Toast.Header>\r\n\t\t\t\t<Toast.Body className='text-white'>\r\n\t\t\t\t\tReload to see whats new!\r\n\t\t\t\t</Toast.Body>\r\n\t\t\t</Toast>\r\n\t\t</ToastContainer>\r\n\t);\r\n};\r\n\r\nexport default ServiceWorkerWrapper;\r\n"],"mappings":"yJAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,cAAT,CAAyBC,KAAzB,KAAsC,iBAAtC,CACA,MAAO,GAAKC,0BAAZ,KAA2C,6BAA3C,CACA,MAAO,2BAAP,C,wFAEA,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAuB,EAAM,CAClC,cAAoCL,QAAQ,CAAC,KAAD,CAA5C,wCAAOM,UAAP,eAAmBC,aAAnB,eACA,eAA0CP,QAAQ,CAAC,IAAD,CAAlD,yCAAOQ,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,YAAD,CAAkB,CACpCJ,aAAa,CAAC,IAAD,CAAb,CACAE,gBAAgB,CAACE,YAAY,CAACC,OAAd,CAAhB,CACA,CAHD,CAKA;AACAX,SAAS,CAAC,UAAM,CACfG,yBAAyB,CAACS,QAA1B,CAAmC,CAAEC,QAAQ,CAAEJ,UAAZ,CAAnC,EACA,CAFQ,CAEN,EAFM,CAAT,CAIA;AACA,GAAMK,WAAU,CAAG,QAAbA,WAAa,EAAM,CACxBP,aAAa,OAAb,EAAAA,aAAa,SAAb,QAAAA,aAAa,CAAEQ,WAAf,CAA2B,CAAEC,IAAI,CAAE,cAAR,CAA3B,EACAV,aAAa,CAAC,KAAD,CAAb,CACAW,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB,EACA,CAJD,CAMA,mBACC,KAAC,cAAD,EAAgB,SAAS,CAAC,cAA1B,CAAyC,OAAO,CAAEL,UAAlD,uBACC,MAAC,KAAD,EAAO,IAAI,CAAET,UAAb,CAAyB,OAAO,CAAES,UAAlC,CAA8C,EAAE,CAAC,MAAjD,wBACC,KAAC,KAAD,CAAO,MAAP,wBACC,eAAQ,SAAS,CAAC,oBAAlB,mCADD,EADD,cAMC,KAAC,KAAD,CAAO,IAAP,EAAY,SAAS,CAAC,YAAtB,sCAND,GADD,EADD,CAcA,CAnCD,CAqCA,cAAeV,qBAAf"},"metadata":{},"sourceType":"module"}