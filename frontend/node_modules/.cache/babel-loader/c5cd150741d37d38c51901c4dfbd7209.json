{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{CART_ADD_ITEM,CART_REMOVE_ITEM,CART_SAVE_SHIPPING_ADDRESS,CART_SAVE_PAYMENT_METHOD}from'../constants/cartConstants';// get the product id and the quantity of the item to add to the cart\nexport var addItem=function addItem(id,qty){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/products/\".concat(id));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch({type:CART_ADD_ITEM,payload:{product:data._id,name:data.name,image:data.image,price:data.price,countInStock:data.countInStock,qty:qty}});// update the local storage with the new cart\nlocalStorage.setItem('cartItems',JSON.stringify(getState().cart.cartItems));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};// get the product id to be removed from the cart\nexport var removeItem=function removeItem(id){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch,getState){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{dispatch({type:CART_REMOVE_ITEM,payload:id});// update the local storage with the updated cart\nlocalStorage.setItem('cartItems',JSON.stringify(getState().cart.cartItems));}catch(error){console.log(error);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};// get the shipping address data and dispatch corresponding action\nexport var saveShippingAddress=function saveShippingAddress(data){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:try{dispatch({type:CART_SAVE_SHIPPING_ADDRESS,payload:data});localStorage.setItem('shippingAddress',JSON.stringify(data));}catch(error){console.log(error);}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5){return _ref3.apply(this,arguments);};}();};// get the option for payment and update the local storage as well\nexport var savePaymentMethod=function savePaymentMethod(data){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:try{dispatch({type:CART_SAVE_PAYMENT_METHOD,payload:data});localStorage.setItem('paymentMethod',JSON.stringify(data));}catch(error){console.log(error);}case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x6){return _ref4.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","addItem","id","qty","dispatch","getState","get","data","type","payload","product","_id","name","image","price","countInStock","localStorage","setItem","JSON","stringify","cart","cartItems","console","error","removeItem","log","saveShippingAddress","savePaymentMethod"],"sources":["C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/src/actions/cartActions.js"],"sourcesContent":["import axios from 'axios';\r\nimport {\r\n\tCART_ADD_ITEM,\r\n\tCART_REMOVE_ITEM,\r\n\tCART_SAVE_SHIPPING_ADDRESS,\r\n\tCART_SAVE_PAYMENT_METHOD,\r\n} from '../constants/cartConstants';\r\n\r\n// get the product id and the quantity of the item to add to the cart\r\nexport const addItem = (id, qty) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tconst { data } = await axios.get(`/api/products/${id}`);\r\n\t\tdispatch({\r\n\t\t\ttype: CART_ADD_ITEM,\r\n\t\t\tpayload: {\r\n\t\t\t\tproduct: data._id,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\timage: data.image,\r\n\t\t\t\tprice: data.price,\r\n\t\t\t\tcountInStock: data.countInStock,\r\n\t\t\t\tqty,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// update the local storage with the new cart\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'cartItems',\r\n\t\t\tJSON.stringify(getState().cart.cartItems)\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.error(error);\r\n\t}\r\n};\r\n\r\n// get the product id to be removed from the cart\r\nexport const removeItem = (id) => async (dispatch, getState) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_REMOVE_ITEM,\r\n\t\t\tpayload: id,\r\n\t\t});\r\n\t\t// update the local storage with the updated cart\r\n\t\tlocalStorage.setItem(\r\n\t\t\t'cartItems',\r\n\t\t\tJSON.stringify(getState().cart.cartItems)\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\n// get the shipping address data and dispatch corresponding action\r\nexport const saveShippingAddress = (data) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_SAVE_SHIPPING_ADDRESS,\r\n\t\t\tpayload: data,\r\n\t\t});\r\n\t\tlocalStorage.setItem('shippingAddress', JSON.stringify(data));\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n\r\n// get the option for payment and update the local storage as well\r\nexport const savePaymentMethod = (data) => async (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: CART_SAVE_PAYMENT_METHOD,\r\n\t\t\tpayload: data,\r\n\t\t});\r\n\t\tlocalStorage.setItem('paymentMethod', JSON.stringify(data));\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n};\r\n"],"mappings":"kUAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OACCC,aADD,CAECC,gBAFD,CAGCC,0BAHD,CAICC,wBAJD,KAKO,4BALP,CAOA;AACA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,EAAD,CAAKC,GAAL,mGAAa,iBAAOC,QAAP,CAAiBC,QAAjB,oLAEXT,MAAK,CAACU,GAAN,yBAA2BJ,EAA3B,EAFW,uCAE1BK,IAF0B,kBAE1BA,IAF0B,CAGlCH,QAAQ,CAAC,CACRI,IAAI,CAAEX,aADE,CAERY,OAAO,CAAE,CACRC,OAAO,CAAEH,IAAI,CAACI,GADN,CAERC,IAAI,CAAEL,IAAI,CAACK,IAFH,CAGRC,KAAK,CAAEN,IAAI,CAACM,KAHJ,CAIRC,KAAK,CAAEP,IAAI,CAACO,KAJJ,CAKRC,YAAY,CAAER,IAAI,CAACQ,YALX,CAMRZ,GAAG,CAAHA,GANQ,CAFD,CAAD,CAAR,CAYA;AACAa,YAAY,CAACC,OAAb,CACC,WADD,CAECC,IAAI,CAACC,SAAL,CAAed,QAAQ,GAAGe,IAAX,CAAgBC,SAA/B,CAFD,EAhBkC,+EAqBlCC,OAAO,CAACC,KAAR,cArBkC,oEAAb,oEAAhB,CAyBP;AACA,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,CAACtB,EAAD,oGAAQ,kBAAOE,QAAP,CAAiBC,QAAjB,wHACjC,GAAI,CACHD,QAAQ,CAAC,CACRI,IAAI,CAAEV,gBADE,CAERW,OAAO,CAAEP,EAFD,CAAD,CAAR,CAIA;AACAc,YAAY,CAACC,OAAb,CACC,WADD,CAECC,IAAI,CAACC,SAAL,CAAed,QAAQ,GAAGe,IAAX,CAAgBC,SAA/B,CAFD,EAIA,CAAC,MAAOE,KAAP,CAAc,CACfD,OAAO,CAACG,GAAR,CAAYF,KAAZ,EACA,CAbgC,wDAAR,sEAAnB,CAgBP;AACA,MAAO,IAAMG,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACnB,IAAD,oGAAU,kBAAOH,QAAP,wHAC5C,GAAI,CACHA,QAAQ,CAAC,CACRI,IAAI,CAAET,0BADE,CAERU,OAAO,CAAEF,IAFD,CAAD,CAAR,CAIAS,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAwCC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CAAxC,EACA,CAAC,MAAOgB,KAAP,CAAc,CACfD,OAAO,CAACG,GAAR,CAAYF,KAAZ,EACA,CAT2C,wDAAV,kEAA5B,CAYP;AACA,MAAO,IAAMI,kBAAiB,CAAG,QAApBA,kBAAoB,CAACpB,IAAD,oGAAU,kBAAOH,QAAP,wHAC1C,GAAI,CACHA,QAAQ,CAAC,CACRI,IAAI,CAAER,wBADE,CAERS,OAAO,CAAEF,IAFD,CAAD,CAAR,CAIAS,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCC,IAAI,CAACC,SAAL,CAAeZ,IAAf,CAAtC,EACA,CAAC,MAAOgB,KAAP,CAAc,CACfD,OAAO,CAACG,GAAR,CAAYF,KAAZ,EACA,CATyC,wDAAV,kEAA1B"},"metadata":{},"sourceType":"module"}