{"ast":null,"code":"import _slicedToArray from\"C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Form,Button,Col}from'react-bootstrap';import FormContainer from'../components/FormContainer';import CheckoutStatus from'../components/CheckoutStatus';import{savePaymentMethod}from'../actions/cartActions';import{refreshLogin,getUserDetails}from'../actions/userActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PaymentPage=function PaymentPage(_ref){var history=_ref.history;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var shippingAddress=cart.shippingAddress;var _useState=useState('Credit/Debit Card'),_useState2=_slicedToArray(_useState,2),paymentMethod=_useState2[0],setPaymentMethod=_useState2[1];// default option is the stripe one, but users might not understand 'stripe'\nvar userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDetails=useSelector(function(state){return state.userDetails;});var error=userDetails.error;// fetch user details\nuseEffect(function(){userInfo?userInfo.isSocialLogin?dispatch(getUserDetails(userInfo.id)):dispatch(getUserDetails('profile')):dispatch(getUserDetails('profile'));},[userInfo,dispatch]);// refresh the access tokens when user details throws an error\nuseEffect(function(){if(error&&userInfo&&!userInfo.isSocialLogin){var user=JSON.parse(localStorage.getItem('userInfo'));user&&dispatch(refreshLogin(user.email));}},[error,dispatch,userInfo]);// if shipping address is empty, redirect\nuseEffect(function(){if(!shippingAddress){history.push('/shipping');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleChange=function handleChange(e){setPaymentMethod(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(savePaymentMethod(paymentMethod));history.push('/placeorder');};return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(CheckoutStatus,{step1:true,step2:true,step3:true}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexFlow:'column nowrap',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Form.Check,{inline:true,type:\"radio\",label:\"Credit/Debit Card\",id:\"Credit/Debit Card\",name:\"paymentMethod\",value:\"Credit/Debit Card\",checked:paymentMethod==='Credit/Debit Card',onChange:handleChange}),/*#__PURE__*/_jsx(Form.Check,{inline:true,type:\"radio\",label:\"PayPal Account\",id:\"PayPal\",name:\"paymentMethod\",value:\"PayPal\",checked:paymentMethod==='PayPal',onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"my-3\",size:\"lg\",children:\"Continue\"})})]})]})]});};export default PaymentPage;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","Form","Button","Col","FormContainer","CheckoutStatus","savePaymentMethod","refreshLogin","getUserDetails","PaymentPage","history","dispatch","cart","state","shippingAddress","paymentMethod","setPaymentMethod","userLogin","userInfo","userDetails","error","isSocialLogin","id","user","JSON","parse","localStorage","getItem","email","push","handleChange","e","target","value","handleSubmit","preventDefault","display","flexFlow","alignItems"],"sources":["C:/Users/qvuqv/OneDrive/Documents/UIT/ecom2/MERN-Ecommerce/frontend/src/pages/PaymentPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Form, Button, Col } from 'react-bootstrap';\r\nimport FormContainer from '../components/FormContainer';\r\nimport CheckoutStatus from '../components/CheckoutStatus';\r\nimport { savePaymentMethod } from '../actions/cartActions';\r\nimport { refreshLogin, getUserDetails } from '../actions/userActions';\r\n\r\nconst PaymentPage = ({ history }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst cart = useSelector((state) => state.cart);\r\n\tconst { shippingAddress } = cart;\r\n\r\n\tconst [paymentMethod, setPaymentMethod] = useState('Credit/Debit Card'); // default option is the stripe one, but users might not understand 'stripe'\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\r\n\tconst userDetails = useSelector((state) => state.userDetails);\r\n\tconst { error } = userDetails;\r\n\r\n\t// fetch user details\r\n\tuseEffect(() => {\r\n\t\tuserInfo\r\n\t\t\t? userInfo.isSocialLogin\r\n\t\t\t\t? dispatch(getUserDetails(userInfo.id))\r\n\t\t\t\t: dispatch(getUserDetails('profile'))\r\n\t\t\t: dispatch(getUserDetails('profile'));\r\n\t}, [userInfo, dispatch]);\r\n\r\n\t// refresh the access tokens when user details throws an error\r\n\tuseEffect(() => {\r\n\t\tif (error && userInfo && !userInfo.isSocialLogin) {\r\n\t\t\tconst user = JSON.parse(localStorage.getItem('userInfo'));\r\n\t\t\tuser && dispatch(refreshLogin(user.email));\r\n\t\t}\r\n\t}, [error, dispatch, userInfo]);\r\n\r\n\t// if shipping address is empty, redirect\r\n\tuseEffect(() => {\r\n\t\tif (!shippingAddress) {\r\n\t\t\thistory.push('/shipping');\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst handleChange = (e) => {\r\n\t\tsetPaymentMethod(e.target.value);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tdispatch(savePaymentMethod(paymentMethod));\r\n\t\thistory.push('/placeorder');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormContainer>\r\n\t\t\t{/* three steps are done in the checkout process */}\r\n\t\t\t<CheckoutStatus step1 step2 step3 />\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\tflexFlow: 'column nowrap',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t}}>\r\n\t\t\t\t<h1>Payment Method</h1>\r\n\t\t\t\t<Form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<Form.Group>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\tlabel='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tid='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tname='paymentMethod'\r\n\t\t\t\t\t\t\t\tvalue='Credit/Debit Card'\r\n\t\t\t\t\t\t\t\tchecked={paymentMethod === 'Credit/Debit Card'}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\t\tlabel='PayPal Account'\r\n\t\t\t\t\t\t\t\tid='PayPal'\r\n\t\t\t\t\t\t\t\tname='paymentMethod'\r\n\t\t\t\t\t\t\t\tvalue='PayPal'\r\n\t\t\t\t\t\t\t\tchecked={paymentMethod === 'PayPal'}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t<div className='d-grid'>\r\n\t\t\t\t\t\t<Button type='submit' className='my-3' size='lg'>\r\n\t\t\t\t\t\t\tContinue\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</div>\r\n\t\t</FormContainer>\r\n\t);\r\n};\r\n\r\nexport default PaymentPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}